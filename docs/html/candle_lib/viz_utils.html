

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>viz_utils module &mdash; CANDLE  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="clr_keras_utils module" href="clr_keras_utils.html" />
    <link rel="prev" title="uq_keras_utils module" href="uq_keras_utils.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> CANDLE
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">What is CANDLE?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../candle_lib.html">CANDLE Library API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="candle_keras.html">candle_keras package</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_preprocessing_utils.html">data_preprocessing_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_utils.html">data_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="default_utils.html">default_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="exp_logger.html">exp_logger module</a></li>
<li class="toctree-l2"><a class="reference internal" href="feature_selection_utils.html">feature_selection_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_utils.html">file_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic_utils.html">generic_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="keras_utils.html">keras_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="P1_utils.html">P1_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="profiling_utils.html">profiling_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pytorch_utils.html">pytorch_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="solr_keras.html">solr_keras module</a></li>
<li class="toctree-l2"><a class="reference internal" href="uq_utils.html">uq_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="uq_keras_utils.html">uq_keras_utils module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">viz_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="clr_keras_utils.html">clr_keras_utils module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">How to Contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CANDLE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../candle_lib.html">CANDLE Library API</a> &raquo;</li>
        
      <li>viz_utils module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/candle_lib/viz_utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-viz_utils">
<span id="viz-utils-module"></span><h1>viz_utils module<a class="headerlink" href="#module-viz_utils" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="viz_utils.plot_2d_density_sigma_vs_error">
<code class="sig-prename descclassname">viz_utils.</code><code class="sig-name descname">plot_2d_density_sigma_vs_error</code><span class="sig-paren">(</span><em class="sig-param">sigma</em>, <em class="sig-param">yerror</em>, <em class="sig-param">method=None</em>, <em class="sig-param">figprefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/viz_utils.html#plot_2d_density_sigma_vs_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viz_utils.plot_2d_density_sigma_vs_error" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Functionality to plot a 2D histogram of the distribution of</dt><dd><p>the standard deviations computed for the predictions vs. the
computed errors (i.e. values of observed - predicted).
The plot generated is stored in a png file.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sigma</strong> (<em>numpy array</em>) – Array with standard deviations computed.</p></li>
<li><p><strong>yerror</strong> (<em>numpy array</em>) – Array with errors computed (observed - predicted).</p></li>
<li><p><strong>method</strong> (<em>string</em>) – Method used to comput the standard deviations (i.e. dropout,
heteroscedastic, etc.).</p></li>
<li><p><strong>figprefix</strong> (<em>string</em>) – String to prefix the filename to store the figure generated.
A ‘_density_sigma_error.png’ string will be appended to the
figprefix given.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="viz_utils.plot_calibration_and_errors">
<code class="sig-prename descclassname">viz_utils.</code><code class="sig-name descname">plot_calibration_and_errors</code><span class="sig-paren">(</span><em class="sig-param">mean_sigma</em>, <em class="sig-param">sigma_start_index</em>, <em class="sig-param">sigma_end_index</em>, <em class="sig-param">min_sigma</em>, <em class="sig-param">max_sigma</em>, <em class="sig-param">error_thresholds</em>, <em class="sig-param">error_thresholds_smooth</em>, <em class="sig-param">err_err</em>, <em class="sig-param">s_interpolate</em>, <em class="sig-param">coverage_percentile</em>, <em class="sig-param">method=None</em>, <em class="sig-param">figprefix=None</em>, <em class="sig-param">steps=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/viz_utils.html#plot_calibration_and_errors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viz_utils.plot_calibration_and_errors" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Functionality to plot empirical calibration curves</dt><dd><p>estimated by binning the statistics of computed
standard deviations and errors.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mean_sigma</strong> (<em>numpy array</em>) – Array with the mean standard deviations computed per bin.</p></li>
<li><p><strong>sigma_start_index</strong> (<em>non-negative integer</em>) – Index of the mean_sigma array that defines the start of
the valid empirical calibration interval (i.e. index to
the smallest std for which a meaningful error is obtained).</p></li>
<li><p><strong>sigma_end_index</strong> (<em>non-negative integer</em>) – Index of the mean_sigma array that defines the end of
the valid empirical calibration interval (i.e. index to
the largest std for which a meaningful error is obtained).</p></li>
<li><p><strong>min_sigma</strong> (<em>numpy array</em>) – Array with the minimum standard deviations computed per bin.</p></li>
<li><p><strong>max_sigma</strong> (<em>numpy array</em>) – Array with the maximum standard deviations computed per bin.</p></li>
<li><p><strong>error_thresholds</strong> (<em>numpy array</em>) – Thresholds of the errors computed to attain a certain
error coverage per bin.</p></li>
<li><p><strong>error_thresholds_smooth</strong> (<em>numpy array</em>) – Thresholds of the errors computed to attain a certain
error coverage per bin after a smoothed operation is applied
to the frequently noisy bin-based estimations.</p></li>
<li><p><strong>err_err</strong> (<em>numpy array</em>) – Vertical error bars (usually one standard deviation for a binomial
distribution estimated by bin) for the error calibration
computed empirically.</p></li>
<li><p><strong>s_interpolate</strong> (<em>scipy.interpolate python object</em>) – A python object from scipy.interpolate that computes a
univariate spline (InterpolatedUnivariateSpline) constructed
to express the mapping from standard deviation to error. This
spline is generated during the computational empirical
calibration procedure.</p></li>
<li><p><strong>coverage_percentile</strong> (<em>float</em>) – Value used for the coverage in the percentile estimation
of the observed error.</p></li>
<li><p><strong>method</strong> (<em>string</em>) – Method used to comput the standard deviations (i.e. dropout,
heteroscedastic, etc.).</p></li>
<li><p><strong>figprefix</strong> (<em>string</em>) – String to prefix the filename to store the figure generated.
A ‘_empirical_calibration.png’ string will be appended to
the figprefix given.</p></li>
<li><p><strong>steps</strong> (<em>boolean</em>) – Besides the complete empirical calibration (including raw
statistics, error bars and smoothing), also generates partial
plots with only the raw bin statistics (step1) and with only
the raw bin statistics and the smoothing interpolation (step2).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="viz_utils.plot_density_observed_vs_predicted">
<code class="sig-prename descclassname">viz_utils.</code><code class="sig-name descname">plot_density_observed_vs_predicted</code><span class="sig-paren">(</span><em class="sig-param">Ytest</em>, <em class="sig-param">Ypred</em>, <em class="sig-param">pred_name=None</em>, <em class="sig-param">figprefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/viz_utils.html#plot_density_observed_vs_predicted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viz_utils.plot_density_observed_vs_predicted" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Functionality to plot a 2D histogram of the distribution of observed (ground truth)</dt><dd><p>values vs. predicted values. The plot generated is stored in a png file.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Ytest</strong> (<em>numpy array</em>) – Array with (true) observed values</p></li>
<li><p><strong>Ypred</strong> (<em>numpy array</em>) – Array with predicted values.</p></li>
<li><p><strong>pred_name</strong> (<em>string</em>) – Name of data colum or quantity predicted (e.g. growth, AUC, etc.)</p></li>
<li><p><strong>figprefix</strong> (<em>string</em>) – String to prefix the filename to store the figure generated.
A ‘_density_predictions.png’ string will be appended to the
figprefix given.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="viz_utils.plot_error">
<code class="sig-prename descclassname">viz_utils.</code><code class="sig-name descname">plot_error</code><span class="sig-paren">(</span><em class="sig-param">y_true</em>, <em class="sig-param">y_pred</em>, <em class="sig-param">batch</em>, <em class="sig-param">file_ext</em>, <em class="sig-param">file_pre='output_dir'</em>, <em class="sig-param">subsample=1000</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/viz_utils.html#plot_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viz_utils.plot_error" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="viz_utils.plot_histogram_error_per_sigma">
<code class="sig-prename descclassname">viz_utils.</code><code class="sig-name descname">plot_histogram_error_per_sigma</code><span class="sig-paren">(</span><em class="sig-param">sigma</em>, <em class="sig-param">yerror</em>, <em class="sig-param">method=None</em>, <em class="sig-param">figprefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/viz_utils.html#plot_histogram_error_per_sigma"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viz_utils.plot_histogram_error_per_sigma" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Functionality to plot a 1D histogram of the distribution of</dt><dd><p>computed errors (i.e. values of observed - predicted) observed
for specific values of standard deviations computed. The range of
standard deviations computed is split in xbins values and the
1D histograms of error distributions for the smallest six
standard deviations are plotted.
The plot generated is stored in a png file.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sigma</strong> (<em>numpy array</em>) – Array with standard deviations computed.</p></li>
<li><p><strong>yerror</strong> (<em>numpy array</em>) – Array with errors computed (observed - predicted).</p></li>
<li><p><strong>method</strong> (<em>string</em>) – Method used to comput the standard deviations (i.e. dropout,
heteroscedastic, etc.).</p></li>
<li><p><strong>figprefix</strong> (<em>string</em>) – String to prefix the filename to store the figure generated.
A ‘_histogram_error_per_sigma.png’ string will be appended to
the figprefix given.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="viz_utils.plot_history">
<code class="sig-prename descclassname">viz_utils.</code><code class="sig-name descname">plot_history</code><span class="sig-paren">(</span><em class="sig-param">out</em>, <em class="sig-param">history</em>, <em class="sig-param">metric='loss'</em>, <em class="sig-param">title=None</em>, <em class="sig-param">width=8</em>, <em class="sig-param">height=6</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/viz_utils.html#plot_history"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viz_utils.plot_history" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="viz_utils.plot_metrics">
<code class="sig-prename descclassname">viz_utils.</code><code class="sig-name descname">plot_metrics</code><span class="sig-paren">(</span><em class="sig-param">history</em>, <em class="sig-param">title=None</em>, <em class="sig-param">skip_ep=0</em>, <em class="sig-param">outdir='.'</em>, <em class="sig-param">add_lr=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/viz_utils.html#plot_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viz_utils.plot_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots keras training curves history.
:param skip_ep: number of epochs to skip when plotting metrics
:param add_lr: add curve of learning rate progression over epochs</p>
</dd></dl>

<dl class="function">
<dt id="viz_utils.plot_percentile_predictions">
<code class="sig-prename descclassname">viz_utils.</code><code class="sig-name descname">plot_percentile_predictions</code><span class="sig-paren">(</span><em class="sig-param">Ypred</em>, <em class="sig-param">Ypred_Lp</em>, <em class="sig-param">Ypred_Hp</em>, <em class="sig-param">percentile_list</em>, <em class="sig-param">pred_name=None</em>, <em class="sig-param">figprefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/viz_utils.html#plot_percentile_predictions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viz_utils.plot_percentile_predictions" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Functionality to plot the mean of the percentiles predicted.</dt><dd><p>The plot generated is stored in a png file.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Ypred</strong> (<em>numpy array</em>) – Array with mid percentile predicted values.</p></li>
<li><p><strong>Ypred_Lp</strong> (<em>numpy array</em>) – Array with low percentile predicted values.</p></li>
<li><p><strong>Ypred_Hp</strong> (<em>numpy array</em>) – Array with high percentile predicted values.</p></li>
<li><p><strong>percentile_list</strong> (<em>string list</em>) – List of percentiles predicted (e.g. ‘10p’, ‘90p’, etc.)</p></li>
<li><p><strong>pred_name</strong> (<em>string</em>) – Name of data colum or quantity predicted (e.g. growth, AUC, etc.)</p></li>
<li><p><strong>figprefix</strong> (<em>string</em>) – String to prefix the filename to store the figure generated.
A ‘_density_predictions.png’ string will be appended to the
figprefix given.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="viz_utils.plot_scatter">
<code class="sig-prename descclassname">viz_utils.</code><code class="sig-name descname">plot_scatter</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">classes</em>, <em class="sig-param">out</em>, <em class="sig-param">width=10</em>, <em class="sig-param">height=8</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/viz_utils.html#plot_scatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viz_utils.plot_scatter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="clr_keras_utils.html" class="btn btn-neutral float-right" title="clr_keras_utils module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="uq_keras_utils.html" class="btn btn-neutral float-left" title="uq_keras_utils module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, ANL.gov

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>